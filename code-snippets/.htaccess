# Optimized .htaccess for WordPress with Security + Compression + HTTPS

# BEGIN Force HTTPS
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteCond %{HTTPS} !=on
RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]
</IfModule>
# END Force HTTPS

# BEGIN Gzip Compression
<IfModule mod_deflate.c>
  AddOutputFilterByType DEFLATE text/plain text/html text/xml text/css text/javascript application/javascript application/x-javascript application/json application/xml application/rss+xml application/xhtml+xml application/x-font-ttf font/opentype font/ttf font/eot font/otf
</IfModule>
# END Gzip Compression

# BEGIN Browser Caching
<IfModule mod_expires.c>
  ExpiresActive On
  ExpiresByType image/jpg "access plus 1 year"
  ExpiresByType image/jpeg "access plus 1 year"
  ExpiresByType image/gif "access plus 1 year"
  ExpiresByType image/png "access plus 1 year"
  ExpiresByType text/css "access plus 1 month"
  ExpiresByType text/html "access plus 1 week"
  ExpiresByType application/pdf "access plus 1 month"
  ExpiresByType text/x-javascript "access plus 1 month"
  ExpiresByType application/javascript "access plus 1 month"
  ExpiresByType image/x-icon "access plus 1 year"
</IfModule>
# END Browser Caching

# BEGIN WordPress Core
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>
# END WordPress Core

# BEGIN PHP Settings (via cPanel)
<IfModule mime_module>
  AddHandler application/x-httpd-ea-php84 .php .php8 .phtml
</IfModule>

<IfModule php8_module>
  php_flag display_errors Off
  php_value max_execution_time 30
  php_value max_input_time 60
  php_value max_input_vars 1000
  php_value memory_limit 128M
  php_value post_max_size 8M
  php_value upload_max_filesize 2M
  php_value session.gc_maxlifetime 1440
  php_value session.save_path "/var/cpanel/php/sessions/ea-php84"
  php_flag zlib.output_compression On
</IfModule>

<IfModule lsapi_module>
  php_flag display_errors Off
  php_value max_execution_time 30
  php_value max_input_time 60
  php_value max_input_vars 1000
  php_value memory_limit 128M
  php_value post_max_size 8M
  php_value upload_max_filesize 2M
  php_value session.gc_maxlifetime 1440
  php_value session.save_path "/var/cpanel/php/sessions/ea-php84"
  php_flag zlib.output_compression On
</IfModule>
# END PHP Settings
